webpackJsonp([1],{NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});s("qb6w");var a=s("7+uW"),r={name:"App",data:function(){return{isAuthenticated:!1}},methods:{logedin:function(){this.isAuthenticated=!0,localStorage.setItem("isAuthenticated",this.isAuthenticated),this.$router.push({name:"producers"})},logout:function(){console.log("logging out ...."),this.isAuthenticated=!1,this.$router.push({name:"podcasts"})},update:function(){this.axios.get("/producers/update").then(t=>console.log("done: "+t.data)).catch(t=>console.log(t)),this.$router.push({name:"podcasts"})}},created:function(){this.isAuthenticated=localStorage.getItem("isAuthenticated"),this.$eventHub.$on("logged-in",this.logedin)}},o={render:function(){var t=this.$createElement,e=this._self._c||t;return e("section",{staticClass:"mw7 center",attrs:{id:"app"}},[e("h1",{staticClass:"athelas ph3 ph0-l "},[e("router-link",{staticClass:"banner",attrs:{to:{path:"/",params:{},query:{}}}},[this._v("JsNoise ")])],1),this._v(" "),e("router-view")],1)},staticRenderFns:[]};var i=s("VU/8")(r,o,!1,function(t){s("zEAf")},null,null).exports,n=s("/ocq"),c=s("NYxO"),l={name:"PodcastsListItem",props:["p"],computed:(Object.assign||function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(t[a]=s[a])}return t})({},Object(c.c)(["isLoading"])),methods:{slug:function(t){return`${t.id}-${this.$options.filters.slugify(t.title)}`},slugp:function(t){return`${t.producerId}-${this.$options.filters.slugify(t.producerName)}`}}},d={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("article",{directives:[{name:"show",rawName:"v-show",value:!t.isLoading,expression:"!isLoading"}],staticClass:"pv4 bt bb b--black-10 ph3 ph0-l"},[s("div",{staticClass:"flex flex-column flex-row-ns"},[s("div",{staticClass:"w-100 w-60-ns pr3-ns order-2 order-1-ns"},[s("h1",{staticClass:"f3 athelas mt0 lh-title"},[s("router-link",{staticClass:"no-underline",attrs:{to:"/shows/"+t.slug(t.p)}},[t._v(t._s(t.p.title))])],1),t._v(" "),s("p",{staticClass:"f5 f4-l lh-copy athelas"})]),t._v(" "),s("div",{staticClass:"pl3-ns order-1 order-2-ns mb4 mb0-ns w-100 w-40-ns"})]),t._v(" "),s("p",{staticClass:"f6 lh-copy gray mv0"},[t._v("\n        By "),s("span",{staticClass:"ttu"},[s("router-link",{attrs:{to:{name:"producerShows",params:{producer_id:t.slugp(t.p)}}}},[t._v(t._s(t.p.producerName))])],1),t._v(" "),s("span",{staticClass:"f6  gray"},[t._v(" on "+t._s(t._f("date")(t.p.publishedDate)))])])])},staticRenderFns:[]};var u=s("VU/8")(l,d,!1,function(t){s("qiA1")},"data-v-559eb6bc",null).exports,p=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(t[a]=s[a])}return t},h={name:"Podcasts",props:["producer_id"],components:{PodcastListItem:u},computed:p({},Object(c.c)(["podcasts","totalPages","first","last","isLoading"]),{pid:function(){return(this.producer_id||"").split("-")[0]}}),data:function(){return{currentPage:1,search:""}},methods:p({},Object(c.b)(["loadPodcasts"]),{submit:function(){this.currentPage=1,this.doSearch()},next:function(){this.last||(this.currentPage++,this.doSearch())},prev:function(){this.first||(this.currentPage--,this.doSearch())},doSearch:function(){var t={p:this.currentPage};this.search&&(t.q=this.search),this.producer_id?this.$router.push({name:"producerShows",params:{producer_id:this.produceId},query:t}):this.$router.push({path:"/",query:t})},load:function(){this.loadPodcasts({page:this.currentPage,q:this.search})}}),beforeRouteUpdate:function(t,e,s){this.search=t.query.q||"",this.currentPage=t.query.p||1,this.load(),s()},created:function(){this.search=this.$route.query.q||"",this.currentPage=this.$route.query.p||1,this.load()}},m={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"pa4-l"},[s("form",{staticClass:"bg-light-red mw7 center pa4 br2-ns ba b--black-10",on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[s("fieldset",{staticClass:"cf bn ma0 pa0"},[s("div",{staticClass:"cf"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"f6 f5-l input-reset bn fl black-80 bg-white pa3 lh-solid w-100 w-75-m w-80-l br2-ns br--left-ns",attrs:{placeholder:"What are you looking for today ?",type:"text"},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}})])])])]),t._v(" "),t._l(t.podcasts,function(e){return s("PodcastListItem",{directives:[{name:"show",rawName:"v-show",value:!t.isLoading,expression:"!isLoading"}],key:e.id,attrs:{p:e}})}),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.isLoading,expression:"isLoading"}],staticClass:"m8 tc v-mid top-40"},[s("h2",[t._v("Loading, please wait! ")])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:0==t.podcasts.length&&!t.isLoading,expression:"podcasts.length == 0 && !isLoading"}],staticClass:"m8 tc v-mid top-40"},[s("h2",[t._v("Nothing found yet!")])]),t._v(" "),s("div",{staticClass:"mw8 center"},[s("nav",{staticClass:"cf pa3 pa4-ns",attrs:{"data-name":"pagination-next-prev"}},[s("a",{directives:[{name:"show",rawName:"v-show",value:!t.first,expression:"!first"}],staticClass:"fl dib link dim black f6 f5-ns b pa2",attrs:{title:"Previous"},on:{click:t.prev}},[t._v("← Previous")]),t._v(" "),s("a",{directives:[{name:"show",rawName:"v-show",value:!t.last,expression:"!last"}],staticClass:"fr dib link dim black f6 f5-ns b pa2",attrs:{title:"Next"},on:{click:t.next}},[t._v("Next →")])])])],2)},staticRenderFns:[]},v=s("VU/8")(h,m,!1,null,null,null).exports,f=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(t[a]=s[a])}return t},g={name:"Podcasts",props:["producer_id"],components:{PodcastListItem:u},computed:f({},Object(c.c)(["podcasts","totalPages","first","last","isLoading"]),{pid:function(){return(this.producer_id||"").split("-")[0]}}),data:function(){return{currentPage:1,search:""}},methods:f({},Object(c.b)(["loadPodcasts"]),{submit:function(){this.currentPage=1,this.doSearch()},next:function(){this.last||(this.currentPage++,this.doSearch())},prev:function(){this.first||(this.currentPage--,this.doSearch())},doSearch:function(){var t={p:this.currentPage};this.search&&(t.q=this.search),this.$router.push({name:"producerShows",param:{producer_id:this.producerId},query:t})},load:function(){this.loadPodcasts({page:this.currentPage,q:this.search,pid:this.pid})}}),beforeRouteUpdate:function(t,e,s){this.search=t.query.q||"",this.currentPage=t.query.p||1,this.load(),s()},created:function(){this.search=this.$route.query.q||"",this.currentPage=this.$route.query.p||1,this.load()}},b={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"pa4-l"},[s("form",{staticClass:"bg-light-red mw7 center pa4 br2-ns ba b--black-10",on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[s("fieldset",{staticClass:"cf bn ma0 pa0"},[s("div",{staticClass:"cf"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"f6 f5-l input-reset bn fl black-80 bg-white pa3 lh-solid w-100 w-75-m w-80-l br2-ns br--left-ns",attrs:{placeholder:"What are you looking for today ?",type:"text"},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}})])])])]),t._v(" "),t._l(t.podcasts,function(t){return s("PodcastListItem",{key:t.id,attrs:{p:t}})}),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.isLoading,expression:"isLoading"}],staticClass:"m8 tc v-mid top-40"},[s("h2",[t._v("Loading, please wait")])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:0==t.podcasts.length&&!t.isLoading,expression:"podcasts.length == 0 && !isLoading"}],staticClass:"m8 tc v-mid top-40"},[s("h2",[t._v("Nothing found yet!")])]),t._v(" "),s("div",{staticClass:"mw8 center"},[s("nav",{staticClass:"cf pa3 pa4-ns",attrs:{"data-name":"pagination-next-prev"}},[s("a",{directives:[{name:"show",rawName:"v-show",value:!t.first,expression:"!first"}],staticClass:"fl dib link dim black f6 f5-ns b pa2",attrs:{title:"Previous"},on:{click:t.prev}},[t._v("← Previous")]),t._v(" "),s("a",{directives:[{name:"show",rawName:"v-show",value:!t.last,expression:"!last"}],staticClass:"fr dib link dim black f6 f5-ns b pa2",attrs:{title:"Next"},on:{click:t.next}},[t._v("Next →")])])])],2)},staticRenderFns:[]},w=s("VU/8")(g,b,!1,null,null,null).exports,_=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(t[a]=s[a])}return t},P={computed:_({},Object(c.c)(["producers"])),data:function(){return{producer:{name:"",website:"",feedUrl:""}}},methods:_({},Object(c.b)(["loadProducers","saveProducer"]),{add:function(){this.saveProducer(this.producer),this.producer={name:"",website:"",feedUrl:""}},getEmptyPriducer:function(){return{name:"",url:"",feedUrl:""}},saveProducers:function(){localStorage.setItem("producers",JSON.stringify(this.producers))},load:function(){this.loadProducers()}}),created:function(){this.load()}},y={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("h3",[t._v("Producers list")]),t._v(" "),s("form",{staticClass:"pv4 bt bb b--black-10 ph3 ph0-l",on:{submit:function(e){return e.preventDefault(),t.add(e)}}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.producer.name,expression:"producer.name"}],attrs:{type:"text",required:"",placeholder:"producer name"},domProps:{value:t.producer.name},on:{input:function(e){e.target.composing||t.$set(t.producer,"name",e.target.value)}}}),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.producer.url,expression:"producer.url"}],attrs:{type:"url",required:"",placeholder:"producer url"},domProps:{value:t.producer.url},on:{input:function(e){e.target.composing||t.$set(t.producer,"url",e.target.value)}}}),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.producer.feedUrl,expression:"producer.feedUrl"}],attrs:{type:"url",required:"",placeholder:"feeds url"},domProps:{value:t.producer.feedUrl},on:{input:function(e){e.target.composing||t.$set(t.producer,"feedUrl",e.target.value)}}}),t._v(" "),s("button",[t._v("add")])]),t._v(" "),s("br"),t._v(" "),s("div",t._l(t.producers,function(e){return s("div",{key:e.feedUrl},[t._v(" "+t._s(e.name)+" ("+t._s(e.count)+" shows) ")])}))])},staticRenderFns:[]},x=s("VU/8")(P,y,!1,null,null,null).exports,C={methods:{test:function(t){t.target&&this.axios.get(`http://rssfeedvalidator.herokuapp.com/api/testrss?url=${t.target.value}`).then(t=>{console.log(t.data)})}}},$={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("h2",[this._v("Tester")]),this._v(" "),e("div",[e("input",{attrs:{type:"text",placeholder:"feed url"}}),this._v(" "),e("button",{on:{click:this.test}},[this._v("Test")])]),this._v(" "),this._m(0)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("h3",[this._v("What do we get back?")])])}]},L=s("VU/8")(C,$,!1,null,null,null).exports,q={name:"login",data:function(){return{username:"",password:""}},methods:(Object.assign||function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(t[a]=s[a])}return t})({},Object(c.b)(["login"]),{logMeIn:function(){this.login({username:this.username,password:this.password}),this.$router.push("/admin/producers")}})},N={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",[t._v("Login here")]),t._v(" "),s("form",{on:{submit:function(e){return e.preventDefault(),t.logMeIn(e)}}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],attrs:{type:"text",placeholder:"user",required:""},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}}),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{type:"password",required:""},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),t._v(" "),s("button",[t._v("login")])])])},staticRenderFns:[]},k=s("VU/8")(q,N,!1,null,null,null).exports,O=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(t[a]=s[a])}return t},j={props:["id"],computed:O({},Object(c.c)(["podcast","isLoading"])),methods:O({},Object(c.b)(["loadPodcast"]),{load:function(){if(this.id){const t=this.id.split("-")[0];this.loadPodcast(t)}},slugp:function(t){return`${t.producerId}-${this.$options.filters.slugify(t.producerName)}`}}),created:function(){this.load()}},S={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("article",{directives:[{name:"show",rawName:"v-show",value:t.isLoading,expression:"isLoading"}],staticClass:"pv4 bt bb b--black-10 ph3 ph0-l"},[t._m(0)]),t._v(" "),s("article",{directives:[{name:"show",rawName:"v-show",value:!t.isLoading,expression:"!isLoading"}],staticClass:"pv4 bt bb b--black-10 ph3 ph0-l"},[s("div",{staticClass:"flex flex-column flex-row-ns"},[s("div",{staticClass:"w-100 w-60-ns pr3-ns order-1 order-1-ns"},[s("h1",{staticClass:"f3 athelas mt0 lh-title"},[t._v(t._s(t.podcast.title))])])]),t._v(" "),s("p",{staticClass:"f6 lh-copy gray mv0"},[t._v("\n            "+t._s(t.podcast.producerId)+"\n            By "),s("span",{staticClass:"ttu"},[s("router-link",{attrs:{to:{name:"producerShows",params:{producer_id:t.slugp(t.podcast)}}}},[t._v(" "+t._s(t.podcast.producerName))])],1),t._v(" "),s("span",{staticClass:"f6  gray"},[t._v(" on "+t._s(t._f("date")(t.podcast.publishedDate)))])]),t._v(" "),s("div",{staticClass:"pl3-ns order-2 order-2-ns mb4 mb0-ns w-100 w-40-ns pa4 ma0 mh0"},[s("audio",{attrs:{controls:"",src:t.podcast.mp3}},[t._v("\n                Your browser does not support the "),s("code",[t._v("audio")]),t._v(" element.\n            ")])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"flex flex-column flex-row-ns"},[e("div",{staticClass:"w-100 w-60-ns pr3-ns order-1 order-1-ns"},[e("h1",{staticClass:"f3 athelas mt0 lh-title"},[this._v("Loading podcast ... ")])])])}]},U=s("VU/8")(j,S,!1,null,null,null).exports,I=s("f2KA");a.a.use(n.a);var E=new n.a({mode:"history",scrollBehavior:(t,e,s)=>({x:0,y:0}),routes:[{path:"/",name:"root",component:v},{path:"/shows/:id",component:U,props:!0},{path:"/producers/:producer_id",component:w,props:!0,name:"producerShows"},{path:"/admin/producers",component:x,name:"producers",beforeEnter(t,e,s){(localStorage.getItem("auth")||"").length>0?s():s("/login")}},{path:"/admin/test",name:"feedTester",component:L},{path:"/login",name:"Login",component:k},{path:"/logout",name:"Logout",beforeEnter(t,e,s){localStorage.removeItem("auth"),s("/")}},{path:"/error",name:"error",component:I.default},{path:"*",component:v,beforeEnter(t,e,s){console.log("*"),s()}}]}),A=s("mtWM"),R=s.n(A),F=s("Rf8U"),D=s.n(F),V=s("ijY1");s("Ya8g");a.a.use(c.a);var W=new c.a.Store({state:{podcast:{},podcasts:[],totalPages:null,first:!0,last:!0,q:"",producers:[],isLoggedIn:!!localStorage.getItem("auth"),isLoading:!1},getters:{podcasts:t=>t.podcasts,first:t=>t.first,last:t=>t.last,totalPages:t=>t.totalPages,q:t=>t.q,podcast:t=>t.podcast,producers:t=>t.producers,isLoading:t=>t.isLoading},mutations:{setPodcasts(t,e){t.podcasts=e.podcasts,t.first=e.first,t.last=e.last,t.totalPages=e.totalPages},setPodcast:(t,e)=>t.podcast=e,setProducers:(t,e)=>t.producers=e,isLoading:(t,e)=>{t.isLoading=e,1==e&&(t.first=!0,t.last=!0)}},actions:{loadPodcast(t,e){t.commit("isLoading",!0),console.log("isLoading:",!0),a.a.axios.get(`/api/shows/${e}`).then(e=>{t.commit("isLoading",!1),t.commit("setPodcast",e.data)}).catch(e=>{t.commit("isLoading",!1),console.log(e)})},loadPodcasts(t,e){var s=`/api/showslist?page=${e.page}`;e.pid&&(s=`/api/producers/${e.pid}/shows?page=${e.page}`),e.q&&(s+="&q="+e.q),t.commit("isLoading",!0),a.a.axios.get(s).then(e=>{t.commit("setPodcasts",{podcasts:e.data.shows,last:e.data.last,first:e.data.first,totalPages:e.data.totalPages}),t.commit("isLoading",!1)}).catch(e=>{t.commit("isLoading",!1),console.log(e)})},loadProducers(t){a.a.axios.get("/api/admin/producers").then(e=>t.commit("setProducers",e.data)).catch(t=>console.log(t))},saveProducer(t,e){a.a.axios.post("/api/admin/producers",e).then(e=>{t.dispatch("loadProducers")}).catch(t=>console.log(t))},login(t,e){var s=btoa(`${e.username}:${e.password}`);localStorage.setItem("auth",s)}}});a.a.use(D.a,R.a),a.a.use(V),a.a.config.productionTip=!1,a.a.prototype.$eventHub=new a.a,a.a.filter("date",function(t){if(!t)return"";var e=new Date(t);return`${e.getFullYear()}-${e.getMonth()+1}-${e.getDate()}`}),a.a.filter("slugify",function(t){return(t||"").toString().toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")}),R.a.interceptors.request.use(function(t){const e=localStorage.getItem("auth")||"";return e.length>0&&(t.headers={Authorization:`Basic ${e}`}),t},function(t){return Promise.reject(t)}),R.a.interceptors.response.use(function(t){return t},function(t){if((t.response.status+"").startsWith("50")&&(window.location="/error"),400==t.response.status)window.location="/";else{if(![401,403].includes(t.response.status))return Promise.reject(t);localStorage.clear(),window.location="/login"}}),new a.a({el:"#app",store:W,router:E,components:{App:i},template:"<App/>"})},Nrlj:function(t,e){},f2KA:function(t,e,s){"use strict";var a=s("Nrlj"),r=s.n(a),o=s("y0oU"),i=s("VU/8")(r.a,o.a,!1,null,null,null);e.default=i.exports},qb6w:function(t,e){},qiA1:function(t,e){},y0oU:function(t,e,s){"use strict";var a={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("h2",[this._v("Ups, something went wrong :( ")]),this._v(" "),e("div",[e("p",[e("a",{attrs:{href:"/"}},[this._v("Click here to go back!")])])]),this._v(" "),e("div",[e("img",{attrs:{src:"https://images.unsplash.com/photo-1507697364665-69eec30ea71e?ixlib=rb-0.3.5&ixid=eyJhcHBfaWQiOjEyMDd9&s=dfc627dbcbcfca5026ad3f657a4a505f&auto=format&fit=crop&w=1651&q=80",alt:"not found image"}})])])}]};e.a=a},zEAf:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.d746eb043ed2bbe4ddf2.js.map